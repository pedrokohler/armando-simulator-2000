<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Armando Simulator 2000</title>
</head>

<body>
    <textarea rows="20" cols="60"></textarea>
    </br>
    <button>Escrever como o Armando</button>
    </br>
    </br>
    <div></div>
</body>

<script>
    const button = document.querySelector('button');

    function addRandomUpperCase(originalText) {
        const words = originalText.split(' ');
        const newText = words.map(word => Math.random() < 0.1 ? word.toUpperCase() : word).join(' ');
        return newText;
    }

    function addRandomDoubleSpace(originalText) {
        const words = originalText.split(' ');
        const newText = words.map(word => Math.random() < 0.05 ? word + " " : word).join(' ');
        return newText;
    }

    function addRandomQuotes(originalText) {
        const words = originalText.split(' ');
        const newText = words.map(word => Math.random() < 0.005 ? '"' + word + '"' : word).join(' ');
        return newText;
    }

    function substituteQuotes(originalText) {
        return originalText.replace(/"/g, '"""').replace(/(\w)"/g, '$1 "').replace(/"(\w)/g, '" $1');
    }

    function addRandomTitleCase(originalText) {
        const words = originalText.split(' ');
        const newText = words
            .map(word => Math.random() < 0.7 ? word.replace(/(\w)/, v => v.toUpperCase()) : word)
            .join(' ');
        return newText;
    }

    function addSpaceBetweenPonctuation(originalText) {
        return originalText.replace(/([.,\/#!$%\^&\*;:{}=\-_`~()]{1,3})/g, " $1 ");
    }

    function addRandomParagraph(originalText) {
        return originalText.split(" ")
            .map(word => Math.random() < 0.02 ? word + '\n\n' : word)
            .join(" ");
    }

    function addRandomEmoticon(originalText) {
        return originalText.split(" ")
            .map(word => Math.random() < 0.005 ? word + ' 不不不不不 ' : word)
            .join(" ");
    }

    function addRandomSpacesAtTheBeginningOfParagraph(originalText) {
        return originalText.split("\n\n")
            .map((paragraph, index) => index > 0 && Math.random() < 0.7 ? `<pre>            ${paragraph}</pre>` : paragraph)
            .join('\n\n');
    }

    function addRandomEmoticonWithDot(originalText) {
        return originalText.split(".")
            .map(word => Math.random() < 0.05 ? word + ' 不不不不不' : word)
            .join(".");
    }

    button.addEventListener('click', e => {
        e.preventDefault();
        e.stopPropagation();

        const originalText = document.querySelector('textarea').value;

        let finalText = addRandomUpperCase(originalText);
        finalText = addRandomQuotes(finalText);
        finalText = substituteQuotes(finalText);
        finalText = addRandomTitleCase(finalText);
        finalText = addRandomParagraph(finalText);
        finalText = addRandomEmoticon(finalText);
        finalText = addSpaceBetweenPonctuation(finalText);
        finalText = addRandomDoubleSpace(finalText);
        finalText = addRandomSpacesAtTheBeginningOfParagraph(finalText);
        finalText = addRandomEmoticonWithDot(finalText);

        document.querySelector('div').innerHTML = finalText;

    });
</script>

</html>